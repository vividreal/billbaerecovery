!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).mxsdk={})}(this,function(e){class t{constructor(){this._emitter="generic",this._on_cb=[]}fire(e,t){for(var n=this._on_cb,r=n.length;r;){var i=n[r-1];i.type===e&&(i.once&&n.splice(r-1,1),i.cb(t)),r--}}on(e,t){this._on_cb.push({type:e,cb:t,once:!1})}off(e,t){for(var n=this._on_cb,r=n.length-1;r;){var i=n[r];i.type===e&&i.cb===t&&n.splice(r,1),r--}}once(e,t){this._on_cb.push({type:e,cb:t,once:!0})}}var n="http://localhost:80",r={},i={width:"100%",height:"100%",backgroundColor:"#474747",resize:"both",border:"none",maxHeight:"100%",maxWidth:"100%"},o={__proto__:null,url:n,container:"body",params:r,style:i,maxSimultaneousRequest:10,default:{url:n,container:"body",params:r,style:i,maxSimultaneousRequest:10}},s=[{key:"err_resolver_not_found",en:"No resolver for '${idResolver}'. Use 'get_sdk_methods' to list available methods'",fr:"Pas de resolver pour '${idResolver}'. Utiliser 'get_sdk_methods' pour lister les méthodes disponibles"},{key:"err_tool_not_found",en:"No tool for '${idTool}'. Use '{list:true}' to list available tools'",fr:"L'outil '${idTool}' n'existe pas. Lister les outils avec cette option '{list:true}' '"},{key:"err_tool_roles_not_match",en:"Tool ${idTool} need specific role: ${roles}",fr:"L'outil ${idTool} a besoin d'un role spécifique: ${roles}"},{key:"err_view_not_editable",en:"The user can't edit this view",fr:"L'utilisateur n'a pas les droits d'édition sur cette vue"},{key:"err_view_invalid",en:"This view is not valid",fr:"Cette vue n'est pas valide"},{key:"err_layer_not_found",en:"Layer or view not found ${idView}",fr:"Couche ou vue introuvable ${idView}"},{key:"err_not_available_mode",en:"Method not available in this mode: ${mode}",fr:"Méthode non disponible dans ce mode: ${mode}"},{key:"err_version_mismatch",en:"Version worker : ${versionWorker} - Version manager : ${versionManager}",fr:"Version worker : ${versionWorker} - Version manager : ${versionManager}"},{key:"err_resolver_failed",en:"Resolver failed ( idResolver =  ${idResolver}, idRequest = ${idRequest}, msg = ${msg}) ",fr:"Resolver failed ( idResolver =  ${idResolver}, idRequest = ${idRequest}, msg = ${msg})"},{key:"warn_already_init",en:"Already initialized,ignoring",fr:"Déjà initialisé, commande ingnorée"},{key:"log_state",en:"Log state: ${state}",fr:"Log état: ${state}"},{key:"log_event",en:"Log event: ${event}",fr:"Log event: ${event}"},{key:"log_worker_ready",en:"Worker ready",fr:"Worker prêt"},{key:"warn_worker_already_init",en:"Worker already initialized",fr:"Worker déjà initialisé"},{key:"warn_to_much_request",en:"Too much request (${nR}/${mR})",fr:"Trop de requêtes (${nR}/${mR})"},{key:"log_req_queue_counter",en:"Number of request in queue : ${counter}",fr:"Nombre de requêtes en cours :  ${counter}"},{key:"err_handle_message_worker",en:"Failed to handle frameWorker message : ${msg}",fr:"Echec de la prise en charge du message du frameWorker : ${msg}"},{key:"warn_destroyed",en:"Instance destroyed, ignore init",fr:"Instance détruite, ignore initialisation"}];const a=new class{constructor(e){this.opt=Object.assign({},{langDefault:"en",lang:"fr"},e),this.setLang()}setLang(e){this.opt._lang=this._lang=e||this.opt.langDefault}get(e,t,n){const r=this;t=Object.assign({},t),n=n||r._lang;const i=Object.keys(t),o=s.reduce((t,i)=>t||(i.key===e?i[n]||i[r.opt.langDefault]:null),null)||e;return i.reduce((e,n)=>e.replace(new RegExp(`\\$\\{${n}\\}`,"g"),t[n]),o)||o||e}};class u{constructor(e){return Object.assign(this,{level:"log",text:"",key:"",emitter:null,vars:{},lang:"en"},e),this.type="message",this.key&&(this.text=a.get(this.key,this.vars,this.lang)),this}}class c{constructor(e){return Object.assign(this,{state:null},e),this.type="state",this}}class l{constructor(e){return Object.assign(this,{value:null},e),this.type="event",this}}class f{constructor(e){return Object.assign(this,{idRequest:null,value:[],success:!0},e),this.type="response",this}}class h{constructor(e){return Object.assign(this,{idRequest:null,idResolver:null,value:null},e),this.type="request",this}}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}var g=d(function(e,t){!function(e){var t=function(e){try{return!!e()}catch(e){return!0}},n={}.toString,r=function(e){return n.call(e).slice(8,-1)},i="".split,o=t(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==r(e)?i.call(e,""):Object(e)}:Object,s=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},a=function(e){return o(s(e))},u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==p?p:"undefined"!=typeof self?self:{};function c(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}var l,f=function(e){return e&&e.Math==Math&&e},h=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof u&&u)||Function("return this")(),d=!t(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),g=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=h.document,m=g(v)&&g(v.createElement),y=function(e){return m?v.createElement(e):{}},_=!d&&!t(function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a}),b=function(e){if(!g(e))throw TypeError(String(e)+" is not an object");return e},w=function(e,t){if(!g(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!g(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},x=Object.defineProperty,S={f:d?x:function(e,t,n){if(b(e),t=w(t,!0),b(n),_)try{return x(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},R=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},k=d?function(e,t,n){return S.f(e,t,R(1,n))}:function(e,t,n){return e[t]=n,e},j=function(e,t){try{k(h,e,t)}catch(n){h[e]=t}return t},E=h["__core-js_shared__"]||j("__core-js_shared__",{}),L=c(function(e){(e.exports=function(e,t){return E[e]||(E[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),O={}.hasOwnProperty,P=function(e,t){return O.call(e,t)},A=0,T=Math.random(),I=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++A+T).toString(36)},q=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())}),U=q&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$=L("wks"),M=h.Symbol,C=U?M:M&&M.withoutSetter||I,F=function(e){return P($,e)||($[e]=q&&P(M,e)?M[e]:C("Symbol."+e)),$[e]},N=Math.ceil,B=Math.floor,z=function(e){return isNaN(e=+e)?0:(e>0?B:N)(e)},D=Math.min,V=function(e){return e>0?D(z(e),9007199254740991):0},W=Math.max,G=Math.min,H=function(e){return function(t,n,r){var i,o=a(t),s=V(o.length),u=function(e,t){var n=z(e);return n<0?W(n+t,0):G(n,t)}(r,s);if(e&&n!=n){for(;s>u;)if((i=o[u++])!=i)return!0}else for(;s>u;u++)if((e||u in o)&&o[u]===n)return e||u||0;return!e&&-1}},Z={includes:H(!0),indexOf:H(!1)},J={},X=Z.indexOf,Y=function(e,t){var n,r=a(e),i=0,o=[];for(n in r)!P(J,n)&&P(r,n)&&o.push(n);for(;t.length>i;)P(r,n=t[i++])&&(~X(o,n)||o.push(n));return o},K=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Q=Object.keys||function(e){return Y(e,K)},ee=d?Object.defineProperties:function(e,t){b(e);for(var n,r=Q(t),i=r.length,o=0;i>o;)S.f(e,n=r[o++],t[n]);return e},te=h,ne=function(e){return"function"==typeof e?e:void 0},re=function(e,t){return arguments.length<2?ne(te[e])||ne(h[e]):te[e]&&te[e][t]||h[e]&&h[e][t]},ie=re("document","documentElement"),oe=L("keys"),se=function(e){return oe[e]||(oe[e]=I(e))},ae=se("IE_PROTO"),ue=function(){},ce=function(e){return"<script>"+e+"<\/script>"},le=function(){try{l=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;le=l?function(e){e.write(ce("")),e.close();var t=e.parentWindow.Object;return e=null,t}(l):((t=y("iframe")).style.display="none",ie.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ce("document.F=Object")),e.close(),e.F);for(var n=K.length;n--;)delete le.prototype[K[n]];return le()};J[ae]=!0;var fe=Object.create||function(e,t){var n;return null!==e?(ue.prototype=b(e),n=new ue,ue.prototype=null,n[ae]=e):n=le(),void 0===t?n:ee(n,t)},he=F("unscopables"),pe=Array.prototype;null==pe[he]&&S.f(pe,he,{configurable:!0,value:fe(null)});var de=function(e){pe[he][e]=!0},ge={},ve=Function.toString;"function"!=typeof E.inspectSource&&(E.inspectSource=function(e){return ve.call(e)});var me,ye,_e,be=E.inspectSource,we=h.WeakMap;if("function"==typeof we&&/native code/.test(be(we))){var xe=new h.WeakMap,Se=xe.get,Re=xe.has,ke=xe.set;me=function(e,t){return ke.call(xe,e,t),t},ye=function(e){return Se.call(xe,e)||{}},_e=function(e){return Re.call(xe,e)}}else{var je=se("state");J[je]=!0,me=function(e,t){return k(e,je,t),t},ye=function(e){return P(e,je)?e[je]:{}},_e=function(e){return P(e,je)}}var Ee,Le,Oe,Pe={set:me,get:ye,has:_e,enforce:function(e){return _e(e)?ye(e):me(e,{})},getterFor:function(e){return function(t){var n;if(!g(t)||(n=ye(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ae={}.propertyIsEnumerable,Te=Object.getOwnPropertyDescriptor,Ie={f:Te&&!Ae.call({1:2},1)?function(e){var t=Te(this,e);return!!t&&t.enumerable}:Ae},qe=Object.getOwnPropertyDescriptor,Ue={f:d?qe:function(e,t){if(e=a(e),t=w(t,!0),_)try{return qe(e,t)}catch(e){}if(P(e,t))return R(!Ie.f.call(e,t),e[t])}},$e=c(function(e){var t=Pe.get,n=Pe.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||P(i,"name")||k(i,"name",t),n(i).source=r.join("string"==typeof t?t:"")),e!==h?(s?!u&&e[t]&&(a=!0):delete e[t],a?e[t]=i:k(e,t,i)):a?e[t]=i:j(t,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||be(this)})}),Me=K.concat("length","prototype"),Ce={f:Object.getOwnPropertyNames||function(e){return Y(e,Me)}},Fe={f:Object.getOwnPropertySymbols},Ne=re("Reflect","ownKeys")||function(e){var t=Ce.f(b(e)),n=Fe.f;return n?t.concat(n(e)):t},Be=function(e,t){for(var n=Ne(t),r=S.f,i=Ue.f,o=0;o<n.length;o++){var s=n[o];P(e,s)||r(e,s,i(t,s))}},ze=/#|\.prototype\./,De=function(e,n){var r=We[Ve(e)];return r==He||r!=Ge&&("function"==typeof n?t(n):!!n)},Ve=De.normalize=function(e){return String(e).replace(ze,".").toLowerCase()},We=De.data={},Ge=De.NATIVE="N",He=De.POLYFILL="P",Ze=De,Je=Ue.f,Xe=function(e,t){var n,r,i,o,s,a=e.target,u=e.global,c=e.stat;if(n=u?h:c?h[a]||j(a,{}):(h[a]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(s=Je(n,r))&&s.value:n[r],!Ze(u?r:a+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Be(o,i)}(e.sham||i&&i.sham)&&k(o,"sham",!0),$e(n,r,o,e)}},Ye=function(e){return Object(s(e))},Ke=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Qe=se("IE_PROTO"),et=Object.prototype,tt=Ke?Object.getPrototypeOf:function(e){return e=Ye(e),P(e,Qe)?e[Qe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?et:null},nt=F("iterator"),rt=!1;[].keys&&("next"in(Oe=[].keys())?(Le=tt(tt(Oe)))!==Object.prototype&&(Ee=Le):rt=!0),null==Ee&&(Ee={}),P(Ee,nt)||k(Ee,nt,function(){return this});var it={IteratorPrototype:Ee,BUGGY_SAFARI_ITERATORS:rt},ot=S.f,st=F("toStringTag"),at=function(e,t,n){e&&!P(e=n?e:e.prototype,st)&&ot(e,st,{configurable:!0,value:t})},ut=it.IteratorPrototype,ct=function(){return this},lt=function(e,t,n){var r=t+" Iterator";return e.prototype=fe(ut,{next:R(1,n)}),at(e,r,!1),ge[r]=ct,e},ft=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return b(n),function(e){if(!g(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),ht=it.IteratorPrototype,pt=it.BUGGY_SAFARI_ITERATORS,dt=F("iterator"),gt=function(){return this},vt=function(e,t,n,r,i,o,s){lt(n,t,r);var a,u,c,l=function(e){if(e===i&&g)return g;if(!pt&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",h=!1,p=e.prototype,d=p[dt]||p["@@iterator"]||i&&p[i],g=!pt&&d||l(i),v="Array"==t&&p.entries||d;if(v&&(a=tt(v.call(new e)),ht!==Object.prototype&&a.next&&(tt(a)!==ht&&(ft?ft(a,ht):"function"!=typeof a[dt]&&k(a,dt,gt)),at(a,f,!0))),"values"==i&&d&&"values"!==d.name&&(h=!0,g=function(){return d.call(this)}),p[dt]!==g&&k(p,dt,g),ge[t]=g,i)if(u={values:l("values"),keys:o?g:l("keys"),entries:l("entries")},s)for(c in u)(pt||h||!(c in p))&&$e(p,c,u[c]);else Xe({target:t,proto:!0,forced:pt||h},u);return u},mt=Pe.set,yt=Pe.getterFor("Array Iterator"),_t=vt(Array,"Array",function(e,t){mt(this,{type:"Array Iterator",target:a(e),index:0,kind:t})},function(){var e=yt(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values");ge.Arguments=ge.Array,de("keys"),de("values"),de("entries");var bt=Object.assign,wt=Object.defineProperty,xt=!bt||t(function(){if(d&&1!==bt({b:1},bt(wt({},"a",{enumerable:!0,get:function(){wt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=bt({},e)[n]||"abcdefghijklmnopqrst"!=Q(bt({},t)).join("")})?function(e,t){for(var n=Ye(e),r=arguments.length,i=1,s=Fe.f,a=Ie.f;r>i;)for(var u,c=o(arguments[i++]),l=s?Q(c).concat(s(c)):Q(c),f=l.length,h=0;f>h;)u=l[h++],d&&!a.call(c,u)||(n[u]=c[u]);return n}:bt;Xe({target:"Object",stat:!0,forced:Object.assign!==xt},{assign:xt});var St=h.Promise,Rt=function(e,t,n){for(var r in t)$e(e,r,t[r],n);return e},kt=F("species"),jt=function(e){var t=re(e);d&&t&&!t[kt]&&(0,S.f)(t,kt,{configurable:!0,get:function(){return this}})},Et=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Lt=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Ot=F("iterator"),Pt=Array.prototype,At=function(e){return void 0!==e&&(ge.Array===e||Pt[Ot]===e)},Tt=function(e,t,n){if(Et(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},It={};It[F("toStringTag")]="z";var qt="[object z]"===String(It),Ut=F("toStringTag"),$t="Arguments"==r(function(){return arguments}()),Mt=qt?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ut))?n:$t?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i},Ct=F("iterator"),Ft=function(e){if(null!=e)return e[Ct]||e["@@iterator"]||ge[Mt(e)]},Nt=function(e,t,n,r){try{return r?t(b(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&b(i.call(e)),t}},Bt=c(function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,r,i,o){var s,a,u,c,l,f,h,p=Tt(n,r,i?2:1);if(o)s=e;else{if("function"!=typeof(a=Ft(e)))throw TypeError("Target is not iterable");if(At(a)){for(u=0,c=V(e.length);c>u;u++)if((l=i?p(b(h=e[u])[0],h[1]):p(e[u]))&&l instanceof t)return l;return new t(!1)}s=a.call(e)}for(f=s.next;!(h=f.call(s)).done;)if("object"==typeof(l=Nt(s,p,h.value,i))&&l&&l instanceof t)return l;return new t(!1)}).stop=function(e){return new t(!0,e)}}),zt=F("iterator"),Dt=!1;try{var Vt=0,Wt={next:function(){return{done:!!Vt++}},return:function(){Dt=!0}};Wt[zt]=function(){return this},Array.from(Wt,function(){throw 2})}catch(e){}var Gt,Ht,Zt,Jt=F("species"),Xt=function(e,t){var n,r=b(e).constructor;return void 0===r||null==(n=b(r)[Jt])?t:Et(n)},Yt=re("navigator","userAgent")||"",Kt=/(iphone|ipod|ipad).*applewebkit/i.test(Yt),Qt=h.location,en=h.setImmediate,tn=h.clearImmediate,nn=h.process,rn=h.MessageChannel,on=h.Dispatch,sn=0,an={},un=function(e){if(an.hasOwnProperty(e)){var t=an[e];delete an[e],t()}},cn=function(e){return function(){un(e)}},ln=function(e){un(e.data)},fn=function(e){h.postMessage(e+"",Qt.protocol+"//"+Qt.host)};en&&tn||(en=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return an[++sn]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Gt(sn),sn},tn=function(e){delete an[e]},"process"==r(nn)?Gt=function(e){nn.nextTick(cn(e))}:on&&on.now?Gt=function(e){on.now(cn(e))}:rn&&!Kt?(Zt=(Ht=new rn).port2,Ht.port1.onmessage=ln,Gt=Tt(Zt.postMessage,Zt,1)):!h.addEventListener||"function"!=typeof postMessage||h.importScripts||t(fn)||"file:"===Qt.protocol?Gt="onreadystatechange"in y("script")?function(e){ie.appendChild(y("script")).onreadystatechange=function(){ie.removeChild(this),un(e)}}:function(e){setTimeout(cn(e),0)}:(Gt=fn,h.addEventListener("message",ln,!1)));var hn,pn,dn,gn,vn,mn,yn,_n,bn={set:en,clear:tn},wn=Ue.f,xn=bn.set,Sn=h.MutationObserver||h.WebKitMutationObserver,Rn=h.process,kn=h.Promise,jn="process"==r(Rn),En=wn(h,"queueMicrotask"),Ln=En&&En.value;Ln||(hn=function(){var e,t;for(jn&&(e=Rn.domain)&&e.exit();pn;){t=pn.fn,pn=pn.next;try{t()}catch(e){throw pn?gn():dn=void 0,e}}dn=void 0,e&&e.enter()},jn?gn=function(){Rn.nextTick(hn)}:Sn&&!Kt?(vn=!0,mn=document.createTextNode(""),new Sn(hn).observe(mn,{characterData:!0}),gn=function(){mn.data=vn=!vn}):kn&&kn.resolve?(yn=kn.resolve(void 0),_n=yn.then,gn=function(){_n.call(yn,hn)}):gn=function(){xn.call(h,hn)});var On,Pn,An=Ln||function(e){var t={fn:e,next:void 0};dn&&(dn.next=t),pn||(pn=t,gn()),dn=t},Tn=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=Et(t),this.reject=Et(n)},In={f:function(e){return new Tn(e)}},qn=function(e,t){if(b(e),g(t)&&t.constructor===e)return t;var n=In.f(e);return(0,n.resolve)(t),n.promise},Un=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},$n=h.process,Mn=$n&&$n.versions,Cn=Mn&&Mn.v8;Cn?Pn=(On=Cn.split("."))[0]+On[1]:Yt&&(!(On=Yt.match(/Edge\/(\d+)/))||On[1]>=74)&&(On=Yt.match(/Chrome\/(\d+)/))&&(Pn=On[1]);var Fn,Nn,Bn,zn,Dn=Pn&&+Pn,Vn=bn.set,Wn=F("species"),Gn="Promise",Hn=Pe.get,Zn=Pe.set,Jn=Pe.getterFor(Gn),Xn=St,Yn=h.TypeError,Kn=h.document,Qn=h.process,er=re("fetch"),tr=In.f,nr=tr,rr="process"==r(Qn),ir=!!(Kn&&Kn.createEvent&&h.dispatchEvent),or=Ze(Gn,function(){if(be(Xn)===String(Xn)){if(66===Dn)return!0;if(!rr&&"function"!=typeof PromiseRejectionEvent)return!0}if(Dn>=51&&/native code/.test(Xn))return!1;var e=Xn.resolve(1),t=function(e){e(function(){},function(){})};return(e.constructor={})[Wn]=t,!(e.then(function(){})instanceof t)}),sr=or||!function(e,t){if(!Dt)return!1;var n=!1;try{var r={};r[zt]=function(){return{next:function(){return{done:n=!0}}}},Xn.all(r).catch(function(){})}catch(e){}return n}(),ar=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},ur=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;An(function(){for(var i=t.value,o=1==t.state,s=0;r.length>s;){var a,u,c,l=r[s++],f=o?l.ok:l.fail,h=l.resolve,p=l.reject,d=l.domain;try{f?(o||(2===t.rejection&&hr(e,t),t.rejection=1),!0===f?a=i:(d&&d.enter(),a=f(i),d&&(d.exit(),c=!0)),a===l.promise?p(Yn("Promise-chain cycle")):(u=ar(a))?u.call(a,h,p):h(a)):p(i)}catch(e){d&&!c&&d.exit(),p(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&lr(e,t)})}},cr=function(e,t,n){var r,i;ir?((r=Kn.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),h.dispatchEvent(r)):r={promise:t,reason:n},(i=h["on"+e])?i(r):"unhandledrejection"===e&&function(e,t){var n=h.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},lr=function(e,t){Vn.call(h,function(){var n,r=t.value;if(fr(t)&&(n=Un(function(){rr?Qn.emit("unhandledRejection",r,e):cr("unhandledrejection",e,r)}),t.rejection=rr||fr(t)?2:1,n.error))throw n.value})},fr=function(e){return 1!==e.rejection&&!e.parent},hr=function(e,t){Vn.call(h,function(){rr?Qn.emit("rejectionHandled",e):cr("rejectionhandled",e,t.value)})},pr=function(e,t,n,r){return function(i){e(t,n,i,r)}},dr=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,ur(e,t,!0))},gr=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw Yn("Promise can't be resolved itself");var i=ar(n);i?An(function(){var r={done:!1};try{i.call(n,pr(gr,e,r,t),pr(dr,e,r,t))}catch(n){dr(e,r,n,t)}}):(t.value=n,t.state=1,ur(e,t,!1))}catch(n){dr(e,{done:!1},n,t)}}};or&&(Xn=function(e){Lt(this,Xn,Gn),Et(e),Fn.call(this);var t=Hn(this);try{e(pr(gr,this,t),pr(dr,this,t))}catch(e){dr(this,t,e)}},(Fn=function(e){Zn(this,{type:Gn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Rt(Xn.prototype,{then:function(e,t){var n=Jn(this),r=tr(Xt(this,Xn));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=rr?Qn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&ur(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Nn=function(){var e=new Fn,t=Hn(e);this.promise=e,this.resolve=pr(gr,e,t),this.reject=pr(dr,e,t)},In.f=tr=function(e){return e===Xn||e===Bn?new Nn(e):nr(e)},"function"==typeof St&&(zn=St.prototype.then,$e(St.prototype,"then",function(e,t){var n=this;return new Xn(function(e,t){zn.call(n,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof er&&Xe({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return qn(Xn,er.apply(h,arguments))}}))),Xe({global:!0,wrap:!0,forced:or},{Promise:Xn}),at(Xn,Gn,!1),jt(Gn),Bn=re(Gn),Xe({target:Gn,stat:!0,forced:or},{reject:function(e){var t=tr(this);return t.reject.call(void 0,e),t.promise}}),Xe({target:Gn,stat:!0,forced:or},{resolve:function(e){return qn(this,e)}}),Xe({target:Gn,stat:!0,forced:sr},{all:function(e){var t=this,n=tr(t),r=n.resolve,i=n.reject,o=Un(function(){var n=Et(t.resolve),o=[],s=0,a=1;Bt(e,function(e){var u=s++,c=!1;o.push(void 0),a++,n.call(t,e).then(function(e){c||(c=!0,o[u]=e,--a||r(o))},i)}),--a||r(o)});return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=tr(t),r=n.reject,i=Un(function(){var i=Et(t.resolve);Bt(e,function(e){i.call(t,e).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}});var vr=F("match"),mr=function(e){var t;return g(e)&&(void 0!==(t=e[vr])?!!t:"RegExp"==r(e))},yr=function(){var e=b(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function _r(e,t){return RegExp(e,t)}var br={UNSUPPORTED_Y:t(function(){var e=_r("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),BROKEN_CARET:t(function(){var e=_r("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},wr=S.f,xr=Ce.f,Sr=Pe.set,Rr=F("match"),kr=h.RegExp,jr=kr.prototype,Er=/a/g,Lr=/a/g,Or=new kr(Er)!==Er,Pr=br.UNSUPPORTED_Y;if(d&&Ze("RegExp",!Or||Pr||t(function(){return Lr[Rr]=!1,kr(Er)!=Er||kr(Lr)==Lr||"/a/i"!=kr(Er,"i")}))){for(var Ar=function(e,t){var n,r=this instanceof Ar,i=mr(e),o=void 0===t;if(!r&&i&&e.constructor===Ar&&o)return e;Or?i&&!o&&(e=e.source):e instanceof Ar&&(o&&(t=yr.call(e)),e=e.source),Pr&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s,a,u,c,l=(s=Or?new kr(e,t):kr(e,t),a=Ar,ft&&"function"==typeof(u=(r?this:jr).constructor)&&u!==a&&g(c=u.prototype)&&c!==a.prototype&&ft(s,c),s);return Pr&&n&&Sr(l,{sticky:n}),l},Tr=function(e){e in Ar||wr(Ar,e,{configurable:!0,get:function(){return kr[e]},set:function(t){kr[e]=t}})},Ir=xr(kr),qr=0;Ir.length>qr;)Tr(Ir[qr++]);jr.constructor=Ar,Ar.prototype=jr,$e(h,"RegExp",Ar)}jt("RegExp");var Ur=RegExp.prototype,$r=Ur.toString;(t(function(){return"/a/b"!=$r.call({source:"a",flags:"b"})})||"toString"!=$r.name)&&$e(RegExp.prototype,"toString",function(){var e=b(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Ur)?yr.call(e):n)},{unsafe:!0});var Mr=RegExp.prototype.exec,Cr=String.prototype.replace,Fr=Mr,Nr=function(){var e=/a/,t=/b*/g;return Mr.call(e,"a"),Mr.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Br=br.UNSUPPORTED_Y||br.BROKEN_CARET,zr=void 0!==/()??/.exec("")[1];(Nr||zr||Br)&&(Fr=function(e){var t,n,r,i,o=this,s=Br&&o.sticky,a=yr.call(o),u=o.source,c=0,l=e;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),l=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(u="(?: "+u+")",l=" "+l,c++),n=new RegExp("^(?:"+u+")",a)),zr&&(n=new RegExp("^"+u+"$(?!\\s)",a)),Nr&&(t=o.lastIndex),r=Mr.call(s?n:o,l),s?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:Nr&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),zr&&r&&r.length>1&&Cr.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var Dr=Fr;Xe({target:"RegExp",proto:!0,forced:/./.exec!==Dr},{exec:Dr});var Vr=F("species"),Wr=!t(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Gr="$0"==="a".replace(/./,"$0"),Hr=F("replace"),Zr=!!/./[Hr]&&""===/./[Hr]("a","$0"),Jr=!t(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),Xr=function(e,n,r,i){var o=F(e),s=!t(function(){var t={};return t[o]=function(){return 7},7!=""[e](t)}),a=s&&!t(function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Vr]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t});if(!s||!a||"replace"===e&&(!Wr||!Gr||Zr)||"split"===e&&!Jr){var u=/./[o],c=r(o,""[e],function(e,t,n,r,i){return t.exec===Dr?s&&!i?{done:!0,value:u.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}},{REPLACE_KEEPS_$0:Gr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Zr}),l=c[1];$e(String.prototype,e,c[0]),$e(RegExp.prototype,o,2==n?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}i&&k(RegExp.prototype[o],"sham",!0)},Yr=function(e){return function(t,n){var r,i,o=String(s(t)),a=z(n),u=o.length;return a<0||a>=u?e?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Kr={codeAt:Yr(!1),charAt:Yr(!0)},Qr=Kr.charAt,ei=function(e,t,n){return t+(n?Qr(e,t).length:1)},ti=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return Dr.call(e,t)};Xr("match",1,function(e,t,n){return[function(t){var n=s(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=b(e),o=String(this);if(!i.global)return ti(i,o);var s=i.unicode;i.lastIndex=0;for(var a,u=[],c=0;null!==(a=ti(i,o));){var l=String(a[0]);u[c]=l,""===l&&(i.lastIndex=ei(o,V(i.lastIndex),s)),c++}return 0===c?null:u}]});var ni=[].push,ri=Math.min,ii=!t(function(){return!RegExp(4294967295,"y")});Xr("split",2,function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(s(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!mr(e))return t.call(r,e,i);for(var o,a,u,c=[],l=0,f=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(o=Dr.call(f,r))&&!((a=f.lastIndex)>l&&(c.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&ni.apply(c,o.slice(1)),u=o[0].length,l=a,c.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return l===r.length?!u&&f.test("")||c.push(""):c.push(r.slice(l)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=s(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var s=b(e),a=String(this),u=Xt(s,RegExp),c=s.unicode,l=new u(ii?s:"^(?:"+s.source+")",(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(ii?"y":"g")),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===a.length)return null===ti(l,a)?[a]:[];for(var h=0,p=0,d=[];p<a.length;){l.lastIndex=ii?p:0;var g,v=ti(l,ii?a:a.slice(p));if(null===v||(g=ri(V(l.lastIndex+(ii?0:p)),a.length))===h)p=ei(a,p,c);else{if(d.push(a.slice(h,p)),d.length===f)return d;for(var m=1;m<=v.length-1;m++)if(d.push(v[m]),d.length===f)return d;p=h=g}}return d.push(a.slice(h)),d}]},!ii);var oi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},si=F("iterator"),ai=F("toStringTag"),ui=_t.values;for(var ci in oi){var li=h[ci],fi=li&&li.prototype;if(fi){if(fi[si]!==ui)try{k(fi,si,ui)}catch(e){fi[si]=ui}if(fi[ai]||k(fi,ai,ci),oi[ci])for(var hi in _t)if(fi[hi]!==_t[hi])try{k(fi,hi,_t[hi])}catch(e){fi[hi]=_t[hi]}}}var pi=Kr.charAt,di=Pe.set,gi=Pe.getterFor("String Iterator");vt(String,"String",function(e){di(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=gi(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=pi(n,r),t.index+=e.length,{value:e,done:!1})});var vi=F("iterator"),mi=!t(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach(function(e,r){t.delete("b"),n+=r+e}),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[vi]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}),yi=function(e,t,n){var r=w(t);r in e?S.f(e,r,R(0,n)):e[r]=n},_i=function(e){var t,n,r,i,o,s,a=Ye(e),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,f=void 0!==l,h=Ft(a),p=0;if(f&&(l=Tt(l,c>2?arguments[2]:void 0,2)),null==h||u==Array&&At(h))for(n=new u(t=V(a.length));t>p;p++)s=f?l(a[p],p):a[p],yi(n,p,s);else for(o=(i=h.call(a)).next,n=new u;!(r=o.call(i)).done;p++)s=f?Nt(i,l,[r.value,p],!0):r.value,yi(n,p,s);return n.length=p,n},bi=/[^\0-\u007E]/,wi=/[.\u3002\uFF0E\uFF61]/g,xi="Overflow: input needs wider integers to process",Si=Math.floor,Ri=String.fromCharCode,ki=function(e){return e+22+75*(e<26)},ji=function(e,t,n){var r=0;for(e=n?Si(e/700):e>>1,e+=Si(e/t);e>455;r+=36)e=Si(e/35);return Si(r+36*e/(e+38))},Ei=function(e){var t,n,r=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,o=128,s=0,a=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(Ri(n));var u=r.length,c=u;for(u&&r.push("-");c<i;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<l&&(l=n);var f=c+1;if(l-o>Si((2147483647-s)/f))throw RangeError(xi);for(s+=(l-o)*f,o=l,t=0;t<e.length;t++){if((n=e[t])<o&&++s>2147483647)throw RangeError(xi);if(n==o){for(var h=s,p=36;;p+=36){var d=p<=a?1:p>=a+26?26:p-a;if(h<d)break;var g=h-d,v=36-d;r.push(Ri(ki(d+g%v))),h=Si(g/v)}r.push(Ri(ki(h))),a=ji(s,f,c==u),s=0,++c}}++s,++o}return r.join("")},Li=function(e){var t=Ft(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return b(t.call(e))},Oi=re("fetch"),Pi=re("Headers"),Ai=F("iterator"),Ti=Pe.set,Ii=Pe.getterFor("URLSearchParams"),qi=Pe.getterFor("URLSearchParamsIterator"),Ui=/\+/g,$i=Array(4),Mi=function(e){return $i[e-1]||($i[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Ci=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Fi=function(e){var t=e.replace(Ui," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(Mi(n--),Ci);return t}},Ni=/[!'()~]|%20/g,Bi={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},zi=function(e){return Bi[e]},Di=function(e){return encodeURIComponent(e).replace(Ni,zi)},Vi=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:Fi(r.shift()),value:Fi(r.join("="))}))},Wi=function(e){this.entries.length=0,Vi(this.entries,e)},Gi=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Hi=lt(function(e,t){Ti(this,{type:"URLSearchParamsIterator",iterator:Li(Ii(e).entries),kind:t})},"Iterator",function(){var e=qi(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),Zi=function(){Lt(this,Zi,"URLSearchParams");var e,t,n,r,i,o,s,a,u,c=arguments.length>0?arguments[0]:void 0,l=this,f=[];if(Ti(l,{type:"URLSearchParams",entries:f,updateURL:function(){},updateSearchParams:Wi}),void 0!==c)if(g(c))if("function"==typeof(e=Ft(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((s=(o=(i=Li(b(r.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:s.value+"",value:a.value+""})}else for(u in c)P(c,u)&&f.push({key:u,value:c[u]+""});else Vi(f,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},Ji=Zi.prototype;Rt(Ji,{append:function(e,t){Gi(arguments.length,2);var n=Ii(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Gi(arguments.length,1);for(var t=Ii(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){Gi(arguments.length,1);for(var t=Ii(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Gi(arguments.length,1);for(var t=Ii(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){Gi(arguments.length,1);for(var t=Ii(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Gi(arguments.length,1);for(var n,r=Ii(this),i=r.entries,o=!1,s=e+"",a=t+"",u=0;u<i.length;u++)(n=i[u]).key===s&&(o?i.splice(u--,1):(o=!0,n.value=a));o||i.push({key:s,value:a}),r.updateURL()},sort:function(){var e,t,n,r=Ii(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=Ii(this).entries,r=Tt(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new Hi(this,"keys")},values:function(){return new Hi(this,"values")},entries:function(){return new Hi(this,"entries")}},{enumerable:!0}),$e(Ji,Ai,Ji.entries),$e(Ji,"toString",function(){for(var e,t=Ii(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(Di(e.key)+"="+Di(e.value));return n.join("&")},{enumerable:!0}),at(Zi,"URLSearchParams"),Xe({global:!0,forced:!mi},{URLSearchParams:Zi}),mi||"function"!=typeof Oi||"function"!=typeof Pi||Xe({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(g(t=arguments[1])&&"URLSearchParams"===Mt(n=t.body)&&((r=t.headers?new Pi(t.headers):new Pi).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=fe(t,{body:R(0,String(n)),headers:R(0,r)})),i.push(t)),Oi.apply(this,i)}});var Xi,Yi={URLSearchParams:Zi,getState:Ii},Ki=Kr.codeAt,Qi=h.URL,eo=Yi.URLSearchParams,to=Yi.getState,no=Pe.set,ro=Pe.getterFor("URL"),io=Math.floor,oo=Math.pow,so=/[A-Za-z]/,ao=/[\d+-.A-Za-z]/,uo=/\d/,co=/^(0x|0X)/,lo=/^[0-7]+$/,fo=/^\d+$/,ho=/^[\dA-Fa-f]+$/,po=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,go=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,vo=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,mo=/[\u0009\u000A\u000D]/g,yo=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=bo(t.slice(1,-1))))return"Invalid host";e.host=n}else if(Lo(e)){if(t=function(e){var t,n,r=[],i=e.toLowerCase().replace(wi,".").split(".");for(t=0;t<i.length;t++)r.push(bi.test(n=i[t])?"xn--"+Ei(n):n);return r.join(".")}(t),po.test(t))return"Invalid host";if(null===(n=_o(t)))return"Invalid host";e.host=n}else{if(go.test(t))return"Invalid host";for(n="",r=_i(t),i=0;i<r.length;i++)n+=jo(r[i],xo);e.host=n}},_o=function(e){var t,n,r,i,o,s,a,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=co.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?fo:8==o?lo:ho).test(i))return e;s=parseInt(i,o)}n.push(s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=oo(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),r=0;r<n.length;r++)a+=n[r]*oo(256,3-r);return a},bo=function(e){var t,n,r,i,o,s,a,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return e.charAt(f)};if(":"==h()){if(":"!=e.charAt(1))return;f+=2,l=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=n=0;n<4&&ho.test(h());)t=16*t+parseInt(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,c>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;f++}if(!uo.test(h()))return;for(;uo.test(h());){if(o=parseInt(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[c++]=t}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)a=u[c],u[c--]=u[l+s-1],u[l+--s]=a;else if(8!=c)return;return u},wo=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=io(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},xo={},So=xt({},xo,{" ":1,'"':1,"<":1,">":1,"`":1}),Ro=xt({},So,{"#":1,"?":1,"{":1,"}":1}),ko=xt({},Ro,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),jo=function(e,t){var n=Ki(e,0);return n>32&&n<127&&!P(t,e)?e:encodeURIComponent(e)},Eo={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Lo=function(e){return P(Eo,e.scheme)},Oo=function(e){return""!=e.username||""!=e.password},Po=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Ao=function(e,t){var n;return 2==e.length&&so.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},To=function(e){var t;return e.length>1&&Ao(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Io=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Ao(t[0],!0)||t.pop()},qo=function(e){return"."===e||"%2e"===e.toLowerCase()},Uo={},$o={},Mo={},Co={},Fo={},No={},Bo={},zo={},Do={},Vo={},Wo={},Go={},Ho={},Zo={},Jo={},Xo={},Yo={},Ko={},Qo={},es={},ts={},ns=function(e,t,n,r){var i,o,s,a,u,c=n||Uo,l=0,f="",h=!1,p=!1,d=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(vo,"")),t=t.replace(mo,""),i=_i(t);l<=i.length;){switch(o=i[l],c){case Uo:if(!o||!so.test(o)){if(n)return"Invalid scheme";c=Mo;continue}f+=o.toLowerCase(),c=$o;break;case $o:if(o&&(ao.test(o)||"+"==o||"-"==o||"."==o))f+=o.toLowerCase();else{if(":"!=o){if(n)return"Invalid scheme";f="",c=Mo,l=0;continue}if(n&&(Lo(e)!=P(Eo,f)||"file"==f&&(Oo(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,n)return void(Lo(e)&&Eo[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?c=Zo:Lo(e)&&r&&r.scheme==e.scheme?c=Co:Lo(e)?c=zo:"/"==i[l+1]?(c=Fo,l++):(e.cannotBeABaseURL=!0,e.path.push(""),c=Qo)}break;case Mo:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,c=ts;break}c="file"==r.scheme?Zo:No;continue;case Co:if("/"!=o||"/"!=i[l+1]){c=No;continue}c=Do,l++;break;case Fo:if("/"==o){c=Vo;break}c=Ko;continue;case No:if(e.scheme=r.scheme,o==Xi)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&Lo(e))c=Bo;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",c=es;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),c=Ko;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=ts}break;case Bo:if(!Lo(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,c=Ko;continue}c=Vo}else c=Do;break;case zo:if(c=Do,"/"!=o||"/"!=f.charAt(l+1))continue;l++;break;case Do:if("/"!=o&&"\\"!=o){c=Vo;continue}break;case Vo:if("@"==o){h&&(f="%40"+f),h=!0,s=_i(f);for(var g=0;g<s.length;g++){var v=s[g];if(":"!=v||d){var m=jo(v,ko);d?e.password+=m:e.username+=m}else d=!0}f=""}else if(o==Xi||"/"==o||"?"==o||"#"==o||"\\"==o&&Lo(e)){if(h&&""==f)return"Invalid authority";l-=_i(f).length+1,f="",c=Wo}else f+=o;break;case Wo:case Go:if(n&&"file"==e.scheme){c=Xo;continue}if(":"!=o||p){if(o==Xi||"/"==o||"?"==o||"#"==o||"\\"==o&&Lo(e)){if(Lo(e)&&""==f)return"Invalid host";if(n&&""==f&&(Oo(e)||null!==e.port))return;if(a=yo(e,f))return a;if(f="",c=Yo,n)return;continue}"["==o?p=!0:"]"==o&&(p=!1),f+=o}else{if(""==f)return"Invalid host";if(a=yo(e,f))return a;if(f="",c=Ho,n==Go)return}break;case Ho:if(!uo.test(o)){if(o==Xi||"/"==o||"?"==o||"#"==o||"\\"==o&&Lo(e)||n){if(""!=f){var y=parseInt(f,10);if(y>65535)return"Invalid port";e.port=Lo(e)&&y===Eo[e.scheme]?null:y,f=""}if(n)return;c=Yo;continue}return"Invalid port"}f+=o;break;case Zo:if(e.scheme="file","/"==o||"\\"==o)c=Jo;else{if(!r||"file"!=r.scheme){c=Ko;continue}if(o==Xi)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",c=es;else{if("#"!=o){To(i.slice(l).join(""))||(e.host=r.host,e.path=r.path.slice(),Io(e)),c=Ko;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=ts}}break;case Jo:if("/"==o||"\\"==o){c=Xo;break}r&&"file"==r.scheme&&!To(i.slice(l).join(""))&&(Ao(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),c=Ko;continue;case Xo:if(o==Xi||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&Ao(f))c=Ko;else if(""==f){if(e.host="",n)return;c=Yo}else{if(a=yo(e,f))return a;if("localhost"==e.host&&(e.host=""),n)return;f="",c=Yo}continue}f+=o;break;case Yo:if(Lo(e)){if(c=Ko,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Xi&&(c=Ko,"/"!=o))continue}else e.fragment="",c=ts;else e.query="",c=es;break;case Ko:if(o==Xi||"/"==o||"\\"==o&&Lo(e)||!n&&("?"==o||"#"==o)){if(".."===(u=(u=f).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Io(e),"/"==o||"\\"==o&&Lo(e)||e.path.push("")):qo(f)?"/"==o||"\\"==o&&Lo(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Ao(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(o==Xi||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",c=es):"#"==o&&(e.fragment="",c=ts)}else f+=jo(o,Ro);break;case Qo:"?"==o?(e.query="",c=es):"#"==o?(e.fragment="",c=ts):o!=Xi&&(e.path[0]+=jo(o,xo));break;case es:n||"#"!=o?o!=Xi&&("'"==o&&Lo(e)?e.query+="%27":e.query+="#"==o?"%23":jo(o,xo)):(e.fragment="",c=ts);break;case ts:o!=Xi&&(e.fragment+=jo(o,So))}l++}},rs=function(e){var t,n,r=Lt(this,rs,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(e),s=no(r,{type:"URL"});if(void 0!==i)if(i instanceof rs)t=ro(i);else if(n=ns(t={},String(i)))throw TypeError(n);if(n=ns(s,o,null,t))throw TypeError(n);var a=s.searchParams=new eo,u=to(a);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(a)||null},d||(r.href=os.call(r),r.origin=ss.call(r),r.protocol=as.call(r),r.username=us.call(r),r.password=cs.call(r),r.host=ls.call(r),r.hostname=fs.call(r),r.port=hs.call(r),r.pathname=ps.call(r),r.search=ds.call(r),r.searchParams=gs.call(r),r.hash=vs.call(r))},is=rs.prototype,os=function(){var e=ro(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",Oo(e)&&(c+=n+(r?":"+r:"")+"@"),c+=wo(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},ss=function(){var e=ro(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Lo(e)?t+"://"+wo(e.host)+(null!==n?":"+n:""):"null"},as=function(){return ro(this).scheme+":"},us=function(){return ro(this).username},cs=function(){return ro(this).password},ls=function(){var e=ro(this),t=e.host,n=e.port;return null===t?"":null===n?wo(t):wo(t)+":"+n},fs=function(){var e=ro(this).host;return null===e?"":wo(e)},hs=function(){var e=ro(this).port;return null===e?"":String(e)},ps=function(){var e=ro(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ds=function(){var e=ro(this).query;return e?"?"+e:""},gs=function(){return ro(this).searchParams},vs=function(){var e=ro(this).fragment;return e?"#"+e:""},ms=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(d&&ee(is,{href:ms(os,function(e){var t=ro(this),n=String(e),r=ns(t,n);if(r)throw TypeError(r);to(t.searchParams).updateSearchParams(t.query)}),origin:ms(ss),protocol:ms(as,function(e){var t=ro(this);ns(t,String(e)+":",Uo)}),username:ms(us,function(e){var t=ro(this),n=_i(String(e));if(!Po(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=jo(n[r],ko)}}),password:ms(cs,function(e){var t=ro(this),n=_i(String(e));if(!Po(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=jo(n[r],ko)}}),host:ms(ls,function(e){var t=ro(this);t.cannotBeABaseURL||ns(t,String(e),Wo)}),hostname:ms(fs,function(e){var t=ro(this);t.cannotBeABaseURL||ns(t,String(e),Go)}),port:ms(hs,function(e){var t=ro(this);Po(t)||(""==(e=String(e))?t.port=null:ns(t,e,Ho))}),pathname:ms(ps,function(e){var t=ro(this);t.cannotBeABaseURL||(t.path=[],ns(t,e+"",Yo))}),search:ms(ds,function(e){var t=ro(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",ns(t,e,es)),to(t.searchParams).updateSearchParams(t.query)}),searchParams:ms(gs),hash:ms(vs,function(e){var t=ro(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",ns(t,e,ts)):t.fragment=null})}),$e(is,"toJSON",function(){return os.call(this)},{enumerable:!0}),$e(is,"toString",function(){return os.call(this)},{enumerable:!0}),Qi){var ys=Qi.createObjectURL,_s=Qi.revokeObjectURL;ys&&$e(rs,"createObjectURL",function(e){return ys.apply(Qi,arguments)}),_s&&$e(rs,"revokeObjectURL",function(e){return _s.apply(Qi,arguments)})}function bs(e){return void 0===e||($s(e)?Fs(e,""):ws(e)?Fs(e,{}):!!Os(e)&&Fs(e,[]))}function ws(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function xs(e){return ws(e)&&$s(e.type)&&!!e.type.match(/^(vt|rt|cc||sm||gj)$/)}function Ss(e,t,n){$s(n)&&(n=new Function("return "+n)()),t=Os(t)?t:[t];const r=!Ms(n)||n(e,this),i=t.reduce((t,n)=>t||e.type===n,!1);return xs(e)&&i&&r}function Rs(e){return Ss(e,"rt")}function ks(e){const t=new RegExp("MX-.{3}-.{3}-.{3}-.{3}-.{3}");return!!e&&!!e.match(t)}function js(e){const t=new RegExp("^mx_(vector|[a-z]{3})(_vector)?_([0-9a-z]{5,6})_([0-9a-z]{5,6})_[0-9a-z]{5,6}_[0-9a-z]{5,6}(_u_[0-9]+|_o_u_[0-9]+)?$");return $s(e)&&!!e.match(t)}function Es(e){const t=new RegExp("^MX-GJ-.{10}$|^MX-.{5}-.{5}-.{5}$");return!!e&&$s(e)&&!!e.match(t)}function Ls(e){return ws(e)&&ks(e.id)}function Os(e){return!!e&&"object"==typeof e&&Array.isArray(e)}function Ps(e){return Os(e)&&e.reduce((e,t)=>e?ws(t):e,!0)}function As(e){return void 0===e}function Ts(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Is(e){return!0===e||!1===e}function qs(e,t,n){return t=t||0,n=n||Infinity,!(!e||"string"!=typeof e)&&(e=e.trim()).length>=t&&e.length<=n}at(rs,"URL"),Xe({global:!0,forced:!mi,sham:!d},{URL:rs});let Us=new RegExp(/^data:image\/(png|jpeg|svg);base64\,[a-zA-Z0-9\+\/\=]+$/);function $s(e){return"string"==typeof e}function Ms(e){return e instanceof Function}function Cs(e){return e instanceof Element}function Fs(e,t){if(null==e||null==t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Function)return e===t;if(e instanceof RegExp)return e===t;if(e===t||e.valueOf()===t.valueOf())return!0;if(Array.isArray(e)&&e.length!==t.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object))return!1;if(!(t instanceof Object))return!1;var n=Object.keys(e);return Object.keys(t).every(function(e){return-1!==n.indexOf(e)})&&n.every(function(n){return Fs(e[n],t[n])})}function Ns(e){return $s(e)&&/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)}function Bs(e,t){if(t=Object.assign({},{layers:!1},t),!Ns(e))return!1;e=e.toLowerCase();const n=new URL(e),r="https:"===n.protocol,i=n.searchParams.get("service"),o=$s(i)&&!!i.match(/(wmsserver|wms)/i)&&(!t.layers||n.searchParams.has("layers"))&&(!t.styles||n.searchParams.has("styles"));return r&&o}e.isArray=Os,e.isArrayOfNumber=function(e){return Os(e)&&e.reduce((e,t)=>!1===e?e:Ts(t),!0)},e.isArrayOfObject=function(e){return Ps(e)},e.isArrayOfSourceId=function(e){return Os(e)&&e.every(js)},e.isArrayOfString=function(e){return Os(e)&&e.reduce((e,t)=>!1===e?e:$s(t),!0)},e.isArrayOfViews=function(e){return Os(e)&&e.reduce((e,t)=>e?xs(t):e,!0)},e.isArrayOfViewsId=function(e){return Os(e)&&e.reduce((e,t)=>!1===e?e:Es(t),!0)},e.isBase64img=function(e){try{return!(!qs(e,22)||!Us.test(e))&&qs(e.split(",")[1],10)}catch(e){return!1}},e.isBoolean=Is,e.isCanvas=function(e){return e instanceof HTMLCanvasElement},e.isDateString=function(e){return $s(e)&&(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(e)||/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+)|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d)|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d)/.test(e))},e.isElement=Cs,e.isEmail=function(e){return $s(e)&&/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},e.isEmpty=bs,e.isEqual=Fs,e.isFunction=Ms,e.isHTML=function(e){return $s(e)&&/(<([^>]+)>)/i.test(e)},e.isIconFont=function(e){return Cs(e)&&e.classList.contains("fa")},e.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.isMap=function(e){return ws(e)&&e._canvas instanceof HTMLCanvasElement},e.isNotEmpty=function(e){return!bs(e)},e.isNumeric=Ts,e.isObject=ws,e.isProject=Ls,e.isProjectId=ks,e.isProjectsArray=function(e){return Os(e)&&e.reduce((e,t)=>!1===e?e:Ls(t),!0)},e.isPromise=function(e){return e instanceof Promise},e.isRegExp=function(e){return e instanceof RegExp},e.isSorted=function(e,t){return Os(e)&&e.every((e,n,r)=>!n||t?e<r[n+1]:e>=r[n-1])},e.isSourceId=js,e.isString=$s,e.isStringRange=qs,e.isStringifiable=function(e){return!As(e)&&(ws(e)||Os(e)||$s(e)||Ts(e)||Is(e))},e.isTable=Ps,e.isUndefined=As,e.isUrl=Ns,e.isUrlValidWms=Bs,e.isValidType=function(e,t){return{image:["image/apng","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/tiff","image/webp"]}[t].indexOf(e)>-1},e.isView=xs,e.isViewEditable=function(e){return xs(e)&&!0===e._edit},e.isViewGj=function(e){return Ss(e,"gj")},e.isViewId=Es,e.isViewRt=Rs,e.isViewType=Ss,e.isViewVt=function(e){return Ss(e,"vt")},e.isViewWms=function(e){var t,n;return Rs(e)&&Bs(null==e||null===(t=e.data)||void 0===t||null===(n=t.source)||void 0===n?void 0:n.tiles[0])}}(t)}),v=Object.assign({__proto__:null,default:g,__moduleExports:g},g);class m{constructor(e){this.n=0,this.max=3,this.data=e}inc(){this.n++}dec(){this.n--}setData(e){this.data=e}sanitize(){return this._sanitizer(this.data)}_sanitizer(e){const t=this;if(g.isString(e)||g.isNumeric(e))return e;{t.inc();const n=g.isArray(e),r=g.isObject(e),i=n?e:r?Object.keys(e):null,o=n?[]:{};try{i.forEach(r=>{let i=n?r:e[r];g.isObject(i)&&t.n<=t.max&&(i=t._sanitizer(i));const s=g.isFunction(i),a=s||g.isStringifiable(i);(s||a)&&(s&&(i=i.toString()),n?o.push(i):o[r]=i)})}catch(e){console.warn(e)}return t.dec(),o}}}function y(e){return JSON.parse(e)}function _(e){try{return e=new m(e).sanitize(),JSON.stringify(e)}catch(t){console.error("Error in stringify helper",t,e)}}class b extends t{constructor(e){super(),this._init(e)}_init(e){const t=this;t._destroyed?t._message({level:"warning",key:"warn_destroyed"}):t._init_done?t._message({level:"warning",key:"warn_already_init"}):(t.opt=Object.assign({},o,t.opt,e),t._emitter="manager",t._url=null,t._req=[],t._reqId=0,t._build(),t.setUrl(),t.setParams(),t.render(),t._initListener(),t._init_done=!0,t._destroyed=!1)}destroy(){const e=this,t=new h({idRequest:"destroy"});e._post(t),e._removeListener(),e._iframe.remove(),e._init_done=!1,e._destroyed=!0,e.fire("destroyed")}_build(){const e=this;if(!e._init_done){e._iframe=document.createElement("iframe"),e._iframe.classList.add("framecom");for(let t in e.opt.style)e._iframe.style[t]=e.opt.style[t];e.opt.container instanceof Element||(e.opt.container=document.querySelector(e.opt.container)),e.opt.container.appendChild(e._iframe)}}get rect(){return this._iframe.getBoundingClientRect()}set width(e){e=isFinite(e)?e+"px":e||this.rect.width+"px",this._iframe.style.width=e}get width(){return this.rect.width}set height(e){e=isFinite(e)?e+"px":e||this.rect.height+"px",this._iframe.style.height=e}get height(){return this.rect.height}setUrl(e){this._url=new URL(e||this.opt.url)}get url(){return this._url}get version(){return"1.8.26-alpha"}setLang(e){this.opt.lang=e}render(){this._iframe.src=this._url}setParams(e){const t=this;var n=t.opt.params=e||t.opt.params;for(let e in n)t.setParam(e,n[e])}setParam(e,t){this.url.searchParams.set(e,t)}_post(e){this._iframe.contentWindow.postMessage(_(e),"*")}_message(e){e.lang=this.opt.lang||"en",this.fire("message",new u(e))}_initListener(){const e=this;e._msg_handler||(e._msg_handler=e._handleMessageWorker.bind(e),window.addEventListener("message",e._msg_handler))}_removeListener(){window.removeEventListener("message",this._msg_handler)}_handleMessageWorker(e){const t=this;try{const n=Object.assign({},y(e.data));if("event"===n.type){const e=n.value.type,r=n.value.data;e&&t.fire(e,r),t._message({level:"log",key:"log_event",vars:{event:e},emitter:"worker"})}if("message"===n.type)return Object.assign(n,{emitter:"worker"}),t._message(n);if("response"===n.type&&isFinite(n.idRequest)){const e=t._getAndRemoveRequestById(n.idRequest);n.success&&e.onResponse(n.value)}if("state"===n.type)return t.fire(n.state),n.version!==t.version&&t._message({level:"error",key:"err_version_mismatch",vars:{versionManager:t.version,versionWorker:n.version},emitter:"worker"}),void t._message({level:"log",key:"log_state",vars:{state:n.state},emitter:"worker"})}catch(n){t._message({level:"error",key:"err_handle_message_worker",vars:{msg:e.data},detail:n})}}ask(e,t){const n=this,r=n._req.length,i=n.opt.maxSimultaneousRequest;return new Promise((o,s)=>{const a=new h({idRequest:n._reqId++,idResolver:e,value:t});r>i&&(n._message({level:"warning",key:"warn_to_much_request",vars:{nR:r,mR:i}}),s(`too_many_request ${r}. Max= ${i}`)),a.onResponse=e=>{o(e)},n._post(a),n._req.push(a)}).finally(()=>{n._message({level:"log",key:"log_req_queue_counter",vars:{counter:n._req.length}})})}_getAndRemoveRequestById(e){const t=this;let n=t._req.length;for(;n;){const r=n-1,i=t._req[r];if(i&&i.idRequest===e)return t._req.splice(r,1),n=0,i;n--}return{}}}const w={resolvers:{},eventStore:null};class x extends t{constructor(e){super(),this.opt=Object.assign({},w,e),this.isNested()&&this.init()}init(){const e=this;e._emitter="worker",e._init?e.postMessage({level:"warning",key:"warn_worker_already_init"}):(e._init=!0,e.initListener(),e.opt.resolvers._bind(e),e.postState({state:"ready",version:e.version}),e.postMessage({level:"log",key:"log_worker_ready"}),g.isObject(e.opt.eventStore)&&"EventStore"===e.opt.eventStore.className&&(e._eventStore=e.opt.eventStore,e._eventStore.addPassthrough({cb:t=>{e.postEvent({value:t})}})))}get version(){return"1.8.26-alpha"}isNested(){return window.parent!==window}destroy(){this.removeListener()}_post(e){window.parent.postMessage(_(e),"*")}postMessage(e){const t=new u(e);this._post(t)}postEvent(e){const t=new l(e);this._post(t)}postResponse(e){const t=new f(e);this._post(t)}postState(e){const t=new c(e);this._post(t)}initListener(){this._msg_handler=this.handleMessageManager.bind(this),window.addEventListener("message",this._msg_handler,!1)}removeListener(){window.removeEventListener("message",this._msg_handler),this._eventsStore&&this._eventStore.destroy()}handleMessageManager(e){try{const t=this,n=Object.assign({},y(e.data)),r=n.idRequest,i=n.idResolver,o=t.opt.resolvers[i],s=function(e,s){try{var a=Promise.resolve(new Promise((e,s)=>{"destroy"===r?(t.destroy(),e(null)):o||s(new u({level:"error",key:"err_resolver_not_found",vars:{idRequest:r,idResolver:i}})),e(o instanceof Function?o.bind(t.opt.resolvers)(n.value):null)})).then(function(e){t.postResponse({idRequest:r,value:e,success:!0})})}catch(e){return s(e)}return a&&a.then?a.then(void 0,s):a}(0,function(e){if(t.postResponse({idRequest:r,success:!1}),e instanceof u)t._post(e);else{const n=g.isObject(e)?e.message:e;t.postMessage({level:"error",key:"err_resolver_failed",vars:{idRequest:r,idResolver:i,msg:n},data:e})}});return Promise.resolve(s&&s.then?s.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}}var S=d(function(e,t){!function(e){const t={listeners:[],debug:!0,interval:null};function n(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function r(e){return!!e&&"object"==typeof e&&Array.isArray(e)}function i(e){return s(e)&&/(<([^>]+)>)/i.test(e)}function o(e){return e instanceof Promise}function s(e){return"string"==typeof e}function a(e){return e instanceof Function}function u(e){return e instanceof Element}function c(){let e=t.listeners.length;if(!(e<1))for(;--e;){const n=t.listeners[e];if(!n)return;document.body.querySelector('[data-el_id_listener="'+n.target.dataset.el_id_listener+'"]')||(t.listeners.pop(),n.target.removeEventListener(n.tagName,n.listener))}}e.el=function(e){var l;t.interval||(t.interval=setInterval(c,1e4),window.el_config=t);var f=document.createElement(e);return[].slice.call(arguments,1).forEach(i=>{n(i)&&!r(i)&&Object.keys(i).forEach(o=>{l=i[o],"on"===o&&r(l)&&s(l[0])&&a(l[1])?(f.addEventListener(l[0],l[1]),f.dataset.el_id_listener=Math.random().toString(32),t.listeners.push({target:f,tagName:l[0],listener:l[1]})):"on"===o&&n(l)?Object.keys(l).forEach(e=>{a(l[e])&&(f.addEventListener(e,l[e]),f.dataset.el_id_listener=Math.random().toString(32),t.listeners.push({target:f,tagName:e,listener:l[e]}))}):"innerText"===o&&s(l)?f.innerText=l:"dataset"!==o&&"style"!==o||!n(l)?"class"===o&&r(l)?l.forEach(e=>f.classList.add(e)):"input"===e&&"checked"===o&&"checkbox"===i.type?f.checked=!0===l:f.setAttribute(o,i[o]):Object.keys(l).forEach(e=>{f[o][e]=l[e]})}),r(i)&&i.forEach(e=>{u(e)&&f.appendChild(e)}),u(i)&&f.appendChild(i),o(i)?i.then(h):h(i)}),f;function h(t){i(t)||"style"===e?f.innerHTML=t:s(t)&&(f.innerText=t)}}}(t)});function R(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}const k={title:"test",container:document.body,groups:[]},j={tests:[],name:"test",ignore:!1,timeout:1e4},E={test:()=>!1,name:"test",ignore:!1,timeout:1e4},L=[];e.Manager=class extends b{constructor(e){super(e),this.opt=Object.assign({},o,e)}},e.Testing=class{constructor(e){const t=this;t.h=v,t.opt=Object.assign({},k,e),t._results=[]}destroy(){this._destroyed=!0,this.opt.tests=[]}run(e){e=Object.assign({},e),g.isFunction(e.finally)&&(this._finally=e.finally),this._next()}_next(){try{const e=this,t=L.shift();return Promise.resolve(t?Promise.resolve(t()).then(function(){return e._next()}):e._finally?e._finally():void 0)}catch(e){return Promise.reject(e)}}stop(e){throw new Error(e)}check(e,t){const n=this;if(t=Object.assign({},j,t),!n._is_in_opt_set("titles",e))return;if(!n._is_in_opt_set("groups",t.group))return;const r={title:e,message:"",tests:[]};n._results.push(r),L.push(function(){try{const o=function(e){try{const u=t.tests.shift();if(!s)return Promise.resolve(!1);if(!u)return Promise.resolve(null);const c=Object.assign({},E,u),l=n._ui_result(c.name,a);if(c.ignore)return Promise.resolve(null);const f={success:!1,message:"",name:c.name,timing:0};r.tests.push(f);const h=n._promise(c.test,e),p=n._promise_timeout(c.timeout),d=performance.now();return Promise.resolve(Promise.race([h,p])).then(function(t){return f.success=!0===t,f.timing=Math.round(1e4*(performance.now()-d))/1e4,"timeout"===t?(f.success=s,f.message=`timeout ( ${c.timeout} ms)`,l.icon.innerText="⏱",l.text.innerText=": "+f.message,s=!1):(l.icon.innerText=f.success?"✅":"❌",f.message=f.success?"":JSON.stringify(t),l.text.innerText=f.message),l.timing.innerText=` (timing :${f.timing} ms) `,s&&f.success?o(e):(i(),!1)})}catch(e){return Promise.reject(e)}};let s=!0;const a=n._ui_section(e);function i(e){a.text.innerText=`: failed ( ${e} )`,a.icon.innerText="🐞"}return Promise.resolve(R(function(){const e=n._promise(t.init),i=n._promise_timeout(t.timeout);return Promise.resolve(Promise.race([e,i])).then(function(e){if("timeout"!==e)return Promise.resolve(o(e)).then(function(e){return!1===e&&n.stop("Failed"),!0});r.message=`timeout ( ${t.timeout} ms)`,a.icon.innerText="⏱",a.text.innerText=`: ${r.message} `})},function(e){i(e)}))}catch(e){return Promise.reject(e)}})}_promise_timeout(e){return new Promise(t=>{setTimeout(()=>{t("timeout")},e||1e3)})}_promise(e,t){return e=g.isFunction(e)?e:()=>{},new Promise(function(n,r){try{const i=R(function(){return Promise.resolve(e(t)).then(function(e){const t=function(){if(e instanceof Promise)return Promise.resolve(e).then(function(e){n(e)});n(e)}();if(t&&t.then)return t.then(function(){})})},function(e){r(e)});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}})}_ui_section(e){let t,n,r,i;const o=S.el("div",{style:{padding:"10px"}},S.el("b",t=S.el("span"),n=S.el("span",e),r=S.el("span")),i=S.el("ul"));return this.opt.container.appendChild(o),{icon:t,title:n,text:r,list:i}}_ui_result(e,t){let n,r,i,o;const s=S.el("li",n=S.el("span"),r=S.el("span",e),i=S.el("span"),o=S.el("span",{style:{color:"#ccc"}}));return t.list.appendChild(s),{icon:n,title:r,text:i,timing:o}}_is_in_opt_set(e,t){let n=!1;return void 0!==this.opt[e]&&0===this.opt[e].length?n=!0:void 0!==t&&(n=this.opt[e].includes(t)),n}},e.Worker=class extends x{constructor(e){super(e)}}});
//# sourceMappingURL=mxsdk.umd.js.map
